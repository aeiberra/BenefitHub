{% extends "base.html" %}

{% block content %}
<div class="fade-in max-w-2xl mx-auto">
    <h1 class="text-3xl font-bold mb-6">{% if benefit %}Editar Beneficio{% else %}Agregar Nuevo Beneficio{% endif %}</h1>

    <form method="POST" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
        <div class="form-group">
            <input class="form-input" id="name" name="name" type="text" placeholder=" " value="{{ benefit.name if benefit else '' }}" required>
            <label class="form-label" for="name">Nombre</label>
        </div>
        <div class="form-group">
            <textarea class="form-input h-32" id="description" name="description" placeholder=" " required>{{ benefit.description if benefit else '' }}</textarea>
            <label class="form-label" for="description">Descripción</label>
        </div>
        <div class="form-group">
            <input class="form-input" id="image_url" name="image_url" type="url" placeholder=" " value="{{ benefit.image_url if benefit else '' }}" required>
            <label class="form-label" for="image_url">URL de la Imagen</label>
        </div>
        <div class="form-group">
            <input class="form-input" id="company" name="company" type="text" placeholder=" " value="{{ benefit.company if benefit else '' }}" required>
            <label class="form-label" for="company">Empresa</label>
        </div>
        <div class="form-group">
            <select class="form-input" id="category_id" name="category_id" required>
                <option value="" disabled selected>Selecciona una categoría</option>
                {% for category in categories %}
                    <option value="{{ category.id }}" {% if benefit and benefit.category_id == category.id %}selected{% endif %}>{{ category.name }}</option>
                {% endfor %}
            </select>
            <label class="form-label" for="category_id">Categoría</label>
        </div>
        <div class="mb-4">
            <label class="flex items-center">
                <input type="checkbox" class="form-checkbox" name="featured" {% if benefit and benefit.featured %}checked{% endif %}>
                <span class="ml-2 text-gray-700 text-sm font-bold">Destacado</span>
            </label>
        </div>
        <div class="flex items-center justify-between">
            <button class="btn-primary" type="submit">
                {% if benefit %}Actualizar{% else %}Agregar{% endif %} Beneficio
            </button>
            <a href="{{ url_for('admin.dashboard') }}" class="inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800">
                Cancelar
            </a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const formInputs = document.querySelectorAll('.form-input');
        formInputs.forEach(input => {
            if (input.value !== '') {
                input.classList.add('not-empty');
            }
            input.addEventListener('input', function() {
                if (this.value !== '') {
                    this.classList.add('not-empty');
                } else {
                    this.classList.remove('not-empty');
                }
            });
        });
    });
</script>
{% endblock %}
