{% extends "base.html" %}

{% block title %}{{ category.name }} - Plataforma de Beneficios{% endblock %}

{% block content %}
<div class="fade-in">
    <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">{{ category.name }}</h1>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 benefit-container">
        {% for benefit in benefits %}
        <div class="benefit-card bg-white rounded-lg shadow-md overflow-hidden">
            <img src="{{ benefit.image_url }}" alt="{{ benefit.name }}" class="w-full h-48 object-cover">
            <div class="p-4">
                <h3 class="font-semibold text-lg mb-2 text-gray-800">{{ benefit.name }}</h3>
                <p class="text-gray-600 mb-4">{{ benefit.description | truncate(100) }}</p>
                <a href="{{ url_for('main.benefit', id=benefit.id) }}" class="btn-primary inline-block">Ver Detalles</a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const benefits = document.querySelectorAll('.benefit-card');

        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        benefits.forEach(benefit => {
            benefit.style.opacity = '0';
            observer.observe(benefit);
        });
    });
</script>
{% endblock %}
